{% extends 'dashboard/base.html' %}
{% load static %}
{% block title %}Customer Report{% endblock %}
{% block content %}
<div class="text-center mb-3">
  {% if contractor_logo_url %}
  <img src="{{ contractor_logo_url }}" alt="Contractor logo thumbnail" class="img-fluid mb-2" style="max-height:100px;">
  {% endif %}
  <h2>{{ contractor.name|default:contractor.email }}</h2>
</div>
<h1 class="text-center">Summary of Work - {{ project.name }}</h1>
{% if not report %}
<a href="?export=pdf" class="btn btn-secondary mb-3 d-print-none">Download PDF</a>
{% endif %}
<div class="table-responsive">
    <table class="table table-bordered">
        <thead class="table-light">
            <tr>
                <th style="text-align:left;">Date</th>
                <th style="text-align:left;">Description</th>
                <th style="text-align:left;">Asset</th>
                <th style="text-align:left;">Employee</th>
                <th style="text-align:left;">Material</th>
                <th style="text-align:right;">Hours</th>
                <th style="text-align:right;">Billable Amount</th>
            </tr>
        </thead>
        <tbody>
        {% for e in entries %}
            <tr>
                <td style="text-align:left;">{{ e.date }}</td>
                <td style="text-align:left;">{{ e.description }}</td>
                <td style="text-align:left;">{% if e.asset %}{{ e.asset.name }}{% endif %}</td>
                <td style="text-align:left;">{% if e.employee %}{{ e.employee.name }}{% endif %}</td>
                <td style="text-align:left;">{% if e.material %}{{ e.material.description }}{% endif %}</td>
                <td style="text-align:right;">{{ e.hours }}</td>
                <td style="text-align:right;">${{ e.billable_amount }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="7">No job entries.</td></tr>
        {% endfor %}
        <tr>
            <td colspan="6" style="text-align:right; font-weight:bold;">Total</td>
            <td style="text-align:right; font-weight:bold;">${{ total }}</td>
        </tr>
        </tbody>
    </table>
</div>
{% endblock %}

